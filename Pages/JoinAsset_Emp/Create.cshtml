@page
@model tbkk_AC.Pages.JoinAsset_Emp.CreateModel

@{
    ViewData["Title"] = "Create";
}
<div class="card-body">
    <h2>Please Select Join</h2>
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Please Select
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="../JoinAsset_Assets/Create">Join Asset Assets</a>
            <a class="dropdown-item" href="../JoinAsset_Emp/Create">Join Asset Emp</a>
            <a class="dropdown-item" href="../JoinLicense_Assets/Create">Join License Assets</a>
            <a class="dropdown-item" href="../JoinNetwork_Assets/Create">Join Network Assets</a>
        </div>


    </div>
    <form method="post">
        <div class="card " style="margin-top:1%">
            <div class="card-header">
                Create
            </div>
            <div class="card-body">
                <div class="row">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="col">
                        <div class="form-group row">
                            <div class="col-sm-12">
                                <label class="col-sm-0 col-form-label" asp-for="Join_Asset_Emp.Asset_AssetID">Asset</label>
                                @if (Model.Num == "1")
                                {
                                    <input class="form-control" placeholder="AssetID" asp-for="Join_Asset_Emp.Asset_AssetID" id="AssetID" value="@Model.ID" />
                                }
                                else
                                {
                                    <input class="form-control" placeholder="AssetID" asp-for="Join_Asset_Emp.Asset_AssetID" id="AssetID" />
                                }
                                <span class="text-danger" asp-validation-for="Join_Asset_Emp.Asset_AssetID"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <label class="col-sm-0 col-form-label" asp-for="Join_Asset_Emp.Employee_EmployeeID">Employee</label>
                        @if (Model.Num == "2")
                        {
                            <input class="form-control" placeholder="EmployeeID" asp-for="Join_Asset_Emp.Employee_EmployeeID" id="Emp" value="@Model.ID" />
                        }
                        else
                        {
                            <input class="form-control" placeholder="EmployeeID" asp-for="Join_Asset_Emp.Employee_EmployeeID" id="Emp" />
                        }

                        <span class="text-danger" asp-validation-for="Join_Asset_Emp.Employee_EmployeeID"></span>
                    </div>
                </div>
                <input class="form-control" placeholder="AssetID" asp-for="Join_Asset_Emp.Status" value="Join" type="hidden" />
                <div class="form-group row">
                    <div class="col-sm-12">
                        <label class="col-sm-0 col-form-label" asp-for="Join_Asset_Emp.Note"></label>
                        <textarea rows="4" cols="15" class="form-control" asp-for="Join_Asset_Emp.Note"></textarea>
                        <span class="text-danger" asp-validation-for="Join_Asset_Emp.Note"></span>

                    </div>
                </div>
                <div class="form-group row" style="float:right; margin-right:0% ; margin-top:1%">

                    <input style="margin-left:10px" type="submit" value="Confirm" class="btn btn-outline-success" />
                </div>
            </div>

        </div>


    </form>
    <div style="margin-top:1%">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Asset</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Employee</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered " id="dataTable" width="100%" cellspacing="3" style="font-size:small">
                            <thead>
                                <tr>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Asset[0].AssetID)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Asset[0].AssetName)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Asset[0].PurchaseDate)
                                    </th>
                                    <th>
                                        Category
                                    </th>
                                    <th>
                                        Company
                                    </th>

                                    <th>
                                        Department
                                    </th>

                                    <th>
                                        @Html.DisplayNameFor(model => model.Asset[0].Status)
                                    </th>
                                    <th>Select</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.Asset)
                                {
                                    if (item.Status.Equals("InStock")||!item.Status.Equals("Unused"))
                                    {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.AssetID)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.AssetName)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.PurchaseDate)
                                    </td>
                                    <td>
                                        @foreach (var item1 in Model.Category)
                                        {
                                            if (item.Category == item1.CategoryID)
                                            {
                                                @Html.DisplayFor(modelItem => item1.CategoryName)
                                            }
                                        }
                                    </td>
                                    <td>
                                        @foreach (var item1 in Model.Company)
                                        {
                                            if (item.Company_CompanyID == item1.CompanyID)
                                            {
                                                @Html.DisplayFor(modelItem => item1.CompanyName)
                                            }
                                        }

                                    </td>
                                    <td>
                                        @foreach (var item1 in Model.Department)
                                        {
                                            if (item.Department_DepartmentID == item1.DepartmentID)
                                            {
                                                @Html.DisplayFor(modelItem => item1.DepartmentName)
                                            }
                                        }

                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Status)
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-outline-success" onclick="select1(@item.AssetID)">Select</button>
                                    </td>
                                </tr>
                                    }
                                }

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered " id="dataTable1" width="100%" cellspacing="3" style="font-size:small">
                            <thead>
                                <tr>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Employee[0].EmployeeID)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Employee[0].FirstName)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Employee[0].LastName)
                                    </th>
                                    
                                    <th>
                                        Company
                                    </th>
                                    <th>
                                        Location
                                    </th>
                                    <th>
                                        Department
                                    </th>
                                    
                                    <th>Select</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item1 in Model.Employee)
                                {
                                    if (!item1.Status.Equals("Unused"))
                                    {
                                    <tr>
                                        <td>
                                            @Html.DisplayFor(modelItem => item1.EmployeeID)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item1.FirstName)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item1.LastName)
                                        </td>
                                        
                                        <td>
                                            @foreach (var item2 in Model.Company)
                                            {
                                                if (item1.Company_CompanyID == item2.CompanyID)
                                                {
                                                    @Html.DisplayFor(modelItem => item2.CompanyName)
                                                }
                                            }
                                           
                                        </td>
                                        <td>
                                            @foreach (var item2 in Model.Location)
                                            {
                                                if (item1.Location_LocationID == item2.LocationID)
                                                {
                                                    @Html.DisplayFor(modelItem => item2.LocationName)
                                                }
                                            }
                                           
                                        </td>
                                        <td>
                                            @foreach (var item2 in Model.Department)
                                            {
                                                if (item1.Department_DepartmentID == item2.DepartmentID)
                                                {
                                                    @Html.DisplayFor(modelItem => item2.DepartmentName)
                                                }
                                            }
                                            
                                        </td>
                                       
                                        <td>
                                            <button type="button" class="btn btn-outline-success" onclick="select2(@item1.EmployeeID)">Select</button>
                                        </td>
                                    </tr>
                                    }
                                }

                            </tbody>

                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>

    function select1(Ass) {
        document.getElementById("AssetID").value = Ass
    }
    function select2(Emp) {
        document.getElementById("Emp").value = Emp
    }

    </script>
    @section Scripts {
        @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    }
